{% extends 'base.html.twig' %}

{% block title %}Ajouter un employé{% endblock %}

{% block body %}
    <div class="container">
        <h1>Ajouter un nouvel employé</h1>

        {{ form_start(form) }}
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.nom) }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.prenom) }}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.dateEntree) }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.matricule) }}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.numeroCnps) }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.categorieContrat) }}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.situationMatrimoniale) }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.dateNaissance) }}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.age) }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.genre) }}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.groupeSanguin) }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_row(form.contact) }}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="mb-3">
                    {{ form_row(form.departement) }}
                </div>
            </div>
            <div class="col-md-4">
                <div class="mb-3">
                    {{ form_row(form.service) }}
                </div>
            </div>
            <div class="col-md-4">
                <div class="mb-3">
                    {{ form_row(form.fonction) }}
                </div>
            </div>
        </div>

        <button class="btn btn-primary">{{ button_label|default('Enregistrer') }}</button>
        <a href="{{ path('app_rh_index') }}" class="btn btn-secondary">Retour à la liste</a>
        {{ form_end(form) }}
    </div>
{% block javascripts %}
    <script>
        // Calcul automatique de l'âge
        const dateNaissanceInput = document.getElementById('employe_dateNaissance');
        const ageInput = document.getElementById('employe_age');

        if (dateNaissanceInput && ageInput) {
            dateNaissanceInput.addEventListener('change', function() {
                const dateNaissance = new Date(this.value);
                const today = new Date();
                const age = Math.floor((today - dateNaissance) / (365.25 * 24 * 60 * 60 * 1000));

                if (age >= 0) {
                    ageInput.value = age;
                }
            });
        }
    </script>
{% endblock %}
